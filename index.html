<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Climix</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:system-ui;
  display:flex;
  justify-content:center;
}
.app{
  width:100%;
  max-width:420px;
  padding:16px;
}
.card{
  background:rgba(255,255,255,0.08);
  border-radius:18px;
  padding:16px;
  margin-bottom:12px;
}
.temp{
  font-size:3.5rem;
  font-weight:700;
}
.item{
  background:rgba(0,0,0,0.3);
  padding:10px;
  border-radius:12px;
  margin-bottom:6px;
}
input,button{
  width:100%;
  padding:14px;
  font-size:1.2rem;
  border-radius:12px;
  border:none;
}
button{margin-top:8px}
</style>
</head>
<body>

<div class="app">

<div class="card">
  <input id="city" placeholder="Enter city">
  <button onclick="search()">Search</button>
</div>

<div class="card">
  <div class="temp" id="temp">--°C</div>
  <div id="place">Loading…</div>
</div>

<div class="card">
  <h3>Conditions</h3>
  <div id="conditions"></div>
</div>

<div class="card">
  © Manik Roy 2025
</div>

</div>

<script>
async function getJSON(url){
  try{
    const r = await fetch(url);
    if(!r.ok) throw 0;
    return await r.json();
  }catch{
    return null;
  }
}

async function search(){
  const name = city.value.trim();
  if(!name) return;

  const geo = await getJSON(
    "https://geocoding-api.open-meteo.com/v1/search?name="+encodeURIComponent(name)+"&count=1"
  );
  if(!geo || !geo.results) return;

  const l = geo.results[0];
  load(l.latitude, l.longitude, l.name);
}

async function load(lat, lon, name){
  place.textContent = name;

  const url =
    "https://api.open-meteo.com/v1/forecast"
    +"?latitude="+lat
    +"&longitude="+lon
    +"&current_weather=true"
    +"&hourly=temperature_2m,relative_humidity_2m,pressure_msl,windspeed_10m"
    +"&timezone=auto";

  const w = await getJSON(url);

  if(!w || !w.current_weather){
    temp.textContent="--°C";
    conditions.innerHTML="<div class='item'>Offline or network blocked</div>";
    return;
  }

  temp.textContent = w.current_weather.temperature+"°C";

  conditions.innerHTML = `
    <div class="item">Humidity: ${w.hourly.relative_humidity_2m[0]}%</div>
    <div class="item">Pressure: ${w.hourly.pressure_msl[0]} hPa</div>
    <div class="item">Wind: ${w.current_weather.windspeed} km/h</div>
    <div class="item">Timezone: ${w.timezone}</div>
  `;
}

load(28.61,77.20,"Delhi");
</script>
</body>
</html>
