<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Climix</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system}
body{
  background:#000;
  color:#fff;
  display:flex;
  justify-content:center;
}
:root{--aqi-tint:rgba(0,0,0,0)}
.app-frame{
  width:100%;
  max-width:420px;
  padding:16px;
  background:linear-gradient(180deg,var(--aqi-tint),rgba(0,0,0,0.9));
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}
.toggle{
  width:38px;height:38px;border-radius:50%;
  border:none;background:#111;color:#fff;font-size:18px;
}
.card{
  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(14px);
  border-radius:18px;
  padding:18px;
  margin-bottom:14px;
}
.card h2{
  font-size:1.45rem;
  margin-bottom:10px;
  border-bottom:1px solid rgba(255,255,255,0.12);
  padding-bottom:6px;
}
.main-temp{
  font-size:3.6rem;
  font-weight:800;
  text-align:center;
}
.sub-temp{text-align:center;font-size:1.5rem}
input,button{
  height:46px;
  border-radius:14px;
  border:none;
  font-size:1.05rem;
}
input{width:70%;padding:0 10px}
button{width:28%;background:#222;color:#fff}
.grid-2{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}
.list .row{
  display:flex;
  justify-content:space-between;
  padding:8px 10px;
  background:rgba(255,255,255,0.06);
  border-radius:10px;
  margin-bottom:6px;
}
.aqi-big{font-size:2.6rem;font-weight:800;text-align:center}
span{font-weight:600}
</style>
</head>

<body>
<div class="app-frame">

<header>
  <h1>Climix</h1>
  <button class="toggle" onclick="toggleDark()">ðŸŒ™</button>
</header>

<div class="card">
  <input id="city" placeholder="Enter city">
  <button onclick="loadWeather()">Search</button>
</div>

<div class="card">
  <div id="temp" class="main-temp">--Â°C</div>
  <div id="feel" class="sub-temp">Feels like --Â°C</div>
</div>

<div class="card">
<h2>Location Conditions</h2>
<div class="grid-2">
<div>Humidity <span id="humidity">--</span></div>
<div>Pressure <span id="pressure">--</span></div>
<div>Wind <span id="wind">--</span></div>
<div>Direction <span id="windDir">--</span></div>
<div>Precip <span id="precip">--</span></div>
<div>Cloud <span id="cloud">--</span></div>
<div>Visibility <span id="vis">--</span></div>
<div>UV <span id="uv">--</span></div>
<div>Dew <span id="dew">--</span></div>
<div>Sunrise <span id="sunrise">--</span></div>
</div>
</div>

<div class="card">
<h2>AQI Details</h2>
<div class="aqi-big" id="aqiValue">AQI --</div>
<div id="aqiCategory" style="text-align:center">--</div>
<div id="aqiHealth" style="text-align:center;margin-bottom:10px">--</div>
<div class="grid-2">
<div>PM2.5 <span id="pm25">--</span></div>
<div>PM10 <span id="pm10">--</span></div>
<div>Oâ‚ƒ <span id="o3">--</span></div>
<div>NOâ‚‚ <span id="no2">--</span></div>
<div>SOâ‚‚ <span id="so2">--</span></div>
<div>CO <span id="co">--</span></div>
<div>NHâ‚ƒ <span id="nh3">--</span></div>
</div>
</div>

<div class="card">
<h2>Next 24 Hours</h2>
<div id="hourly" class="list"></div>
</div>

<div class="card">
<h2>7-Day Forecast</h2>
<div id="daily" class="list"></div>
</div>

<div class="card" style="text-align:center;font-size:0.9rem">
Â© Manik Roy 2025. All Rights Reserved.
</div>

</div>

<script>
function toggleDark(){
  document.body.classList.toggle("oled");
}

function applyAQITint(aqi){
  let t="rgba(0,0,0,0)";
  if(aqi<=50)t="rgba(0,180,90,.12)";
  else if(aqi<=100)t="rgba(255,200,0,.14)";
  else if(aqi<=150)t="rgba(255,140,0,.16)";
  else if(aqi<=200)t="rgba(255,80,80,.18)";
  else t="rgba(180,0,0,.22)";
  document.documentElement.style.setProperty("--aqi-tint",t);
}

async function loadWeather(){
  const c=document.getElementById("city").value.trim();
  if(!c)return;

  const w=await fetch(`https://wttr.in/${c}?format=j1`).then(r=>r.json());

  const cur=w.current_condition[0];
  document.getElementById("temp").textContent=cur.temp_C+"Â°C";
  document.getElementById("feel").textContent="Feels like "+cur.FeelsLikeC+"Â°C";
  document.getElementById("humidity").textContent=cur.humidity+"%";
  document.getElementById("pressure").textContent=cur.pressure+" mb";
  document.getElementById("wind").textContent=cur.windspeedKmph+" km/h";
  document.getElementById("windDir").textContent=cur.winddir16Point;
  document.getElementById("precip").textContent=cur.precipMM+" mm";
  document.getElementById("cloud").textContent=cur.cloudcover+"%";
  document.getElementById("vis").textContent=cur.visibility+" km";
  document.getElementById("uv").textContent=cur.uvIndex;
  document.getElementById("dew").textContent=cur.DewPointC+"Â°C";
  document.getElementById("sunrise").textContent=w.weather[0].astronomy[0].sunrise;

  // AQI (approx from PM2.5)
  const pm25=cur.pm2_5||20;
  const aqi=Math.round(pm25*2);
  document.getElementById("aqiValue").textContent="AQI "+aqi;
  document.getElementById("aqiCategory").textContent=aqi<=50?"Good":aqi<=100?"Moderate":"Poor";
  document.getElementById("aqiHealth").textContent=aqi<=100?"Normal outdoor activity":"Limit prolonged exposure";
  document.getElementById("pm25").textContent=pm25;
  document.getElementById("pm10").textContent=cur.pm10||"--";
  document.getElementById("o3").textContent=cur.o3||"--";
  document.getElementById("no2").textContent=cur.no2||"--";
  document.getElementById("so2").textContent=cur.so2||"--";
  document.getElementById("co").textContent=cur.co||"--";
  document.getElementById("nh3").textContent=cur.nh3||"--";
  applyAQITint(aqi);

  // Hourly
  const h=document.getElementById("hourly");
  h.innerHTML="";
  w.weather[0].hourly.slice(0,24).forEach(x=>{
    h.innerHTML+=`<div class="row"><span>${x.time/100}:00</span><span>${x.tempC}Â°C</span></div>`;
  });

  // Daily
  const d=document.getElementById("daily");
  d.innerHTML="";
  w.weather.forEach(day=>{
    d.innerHTML+=`<div class="row"><span>${day.date}</span><span>${day.mintempC}Â° / ${day.maxtempC}Â°</span></div>`;
  });
}

// PWA
if("serviceWorker"in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
