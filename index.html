<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Climix</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#000;
  --card:rgba(255,255,255,0.07);
  --text:#fff;
  --accent:0.08;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI;
  display:flex;
  justify-content:center;
}

.app{
  width:100%;
  max-width:420px;
  padding:16px;
  position:relative;
}

.card{
  background:rgba(255,255,255,var(--accent));
  backdrop-filter:blur(18px);
  border-radius:22px;
  padding:18px;
  margin-bottom:16px;
}

.temp{
  font-size:4.4rem;
  font-weight:800;
  letter-spacing:-1px;
}

.place{
  font-size:1.6rem;
  opacity:.9;
}

h3{
  font-size:1.55rem;
  margin:0 0 10px;
}

.item{
  background:rgba(0,0,0,0.35);
  padding:14px;
  border-radius:14px;
  margin-bottom:8px;
  font-size:1.25rem;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

input,button{
  width:100%;
  padding:16px;
  font-size:1.25rem;
  border-radius:16px;
  border:none;
}

button{margin-top:10px}

.toggle{
  position:absolute;
  top:16px;
  right:16px;
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  font-size:20px;
  background:#111;
  color:#fff;
}

.slider{
  width:100%;
}

.footer{
  text-align:center;
  font-size:1.05rem;
  opacity:.7;
}
</style>
</head>

<body>
<div class="app">

<button class="toggle" onclick="toggleMode()">ğŸŒ™</button>

<div class="card">
  <input id="city" placeholder="Enter city">
  <button onclick="search()">Search</button>
</div>

<div class="card">
  <div class="temp" id="temp">--Â°C</div>
  <div class="place" id="place">Loadingâ€¦</div>
</div>

<div class="card">
  <h3>ğŸ¨ Hue Intensity</h3>
  <input class="slider" type="range" min="4" max="14" value="8" oninput="setHue(this.value)">
</div>

<div class="card">
  <h3>ğŸ“ Location Conditions</h3>
  <div id="conditions"></div>
</div>

<div class="card">
  <h3>ğŸŒ¡ï¸ Hourly Temperature (24h)</h3>
  <div id="hourly"></div>
  <div id="hourMinMax" class="item"></div>
</div>

<div class="card">
  <h3>ğŸ“… 7-Day Temperature</h3>
  <div class="grid" id="week"></div>
</div>

<div class="card">
  <h3>ğŸŒ§ï¸ Rain & Precipitation</h3>
  <div id="rain"></div>
</div>

<div class="card">
  <h3>ğŸŒ«ï¸ Air Quality (AQI)</h3>
  <div id="aqi"></div>
</div>

<div class="card footer">
  Â© Manik Roy 2025. All Rights Reserved.
</div>

</div>

<script>
function toggleMode(){
  document.body.style.background =
    document.body.style.background==="#000" ? "#050505" : "#000";
}

function setHue(v){
  document.documentElement.style.setProperty("--accent", v/100);
}

/* ===== WORKING LOGIC (UNCHANGED) ===== */

async function getJSON(url){
  try{
    const r=await fetch(url);
    if(!r.ok) throw 0;
    return await r.json();
  }catch{
    return null;
  }
}

async function search(){
  const name=city.value.trim();
  if(!name) return;

  const geo=await getJSON(
    "https://geocoding-api.open-meteo.com/v1/search?name="+encodeURIComponent(name)+"&count=1"
  );
  if(!geo || !geo.results) return;

  const l=geo.results[0];
  load(l.latitude,l.longitude,l.name);
}

async function load(lat,lon,name){
  place.textContent=name;

  const url=
    "https://api.open-meteo.com/v1/forecast"
    +"?latitude="+lat
    +"&longitude="+lon
    +"&current_weather=true"
    +"&hourly=temperature_2m,relative_humidity_2m,pressure_msl,windspeed_10m,precipitation"
    +"&daily=temperature_2m_min,temperature_2m_max"
    +"&timezone=auto";

  const w=await getJSON(url);
  if(!w || !w.current_weather){
    temp.textContent="--Â°C";
    return;
  }

  temp.textContent=w.current_weather.temperature+"Â°C";

  conditions.innerHTML=`
    <div class="item">Humidity: ${w.hourly.relative_humidity_2m[0]}%</div>
    <div class="item">Pressure: ${w.hourly.pressure_msl[0]} hPa</div>
    <div class="item">Wind: ${w.current_weather.windspeed} km/h</div>
    <div class="item">Latitude: ${lat.toFixed(2)}</div>
    <div class="item">Longitude: ${lon.toFixed(2)}</div>
    <div class="item">Timezone: ${w.timezone}</div>
    <div class="item">Elevation: ${w.elevation} m</div>
    <div class="item">Rain: ${w.hourly.precipitation[0]} mm</div>
    <div class="item">Day Max: ${w.daily.temperature_2m_max[0]}Â°C</div>
    <div class="item">Day Min: ${w.daily.temperature_2m_min[0]}Â°C</div>
  `;

  hourly.innerHTML="";
  let min=999,max=-999;
  for(let i=0;i<24;i++){
    const t=w.hourly.temperature_2m[i];
    min=Math.min(min,t); max=Math.max(max,t);
    hourly.innerHTML+=`<div class="item">Hour ${i}: ${t}Â°C</div>`;
  }
  hourMinMax.textContent=`24h Min: ${min}Â°C | Max: ${max}Â°C`;

  week.innerHTML="";
  for(let i=0;i<7;i++){
    week.innerHTML+=`
      <div class="item">
        Day ${i+1}<br>${w.daily.temperature_2m_min[i]}Â° / ${w.daily.temperature_2m_max[i]}Â°
      </div>`;
  }

  rain.innerHTML=`
    <div class="item">Rain now: ${w.hourly.precipitation[0]} mm</div>
    <div class="item">Wind speed: ${w.current_weather.windspeed} km/h</div>
  `;

  const aq=await getJSON(
    "https://air-quality-api.open-meteo.com/v1/air-quality"
    +"?latitude="+lat
    +"&longitude="+lon
    +"&hourly=us_aqi,pm2_5,pm10,ozone,nitrogen_dioxide,sulphur_dioxide,carbon_monoxide,ammonia"
  );

  if(aq && aq.hourly){
    const v=aq.hourly;
    aqi.innerHTML=`
      <div class="item">AQI: ${v.us_aqi[0]}</div>
      <div class="item">PM2.5: ${v.pm2_5[0]}</div>
      <div class="item">PM10: ${v.pm10[0]}</div>
      <div class="item">Oâ‚ƒ: ${v.ozone[0]}</div>
      <div class="item">NOâ‚‚: ${v.nitrogen_dioxide[0]}</div>
      <div class="item">SOâ‚‚: ${v.sulphur_dioxide[0]}</div>
      <div class="item">CO: ${v.carbon_monoxide[0]}</div>
      <div class="item">NHâ‚ƒ: ${v.ammonia[0]}</div>
      <div class="item">Category: ${v.us_aqi[0]<50?"Good":"Moderate+"}</div>
      <div class="item">Health: Sensitive groups care</div>
    `;
  }else{
    aqi.innerHTML="<div class='item'>AQI unavailable</div>";
  }
}

load(28.61,77.20,"Delhi");
</script>
</body>
</html>
