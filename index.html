<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Climix</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#000">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 min-height:100vh;
 display:flex;
 justify-content:center;
 font-family:Segoe UI,sans-serif;
 overflow-x:hidden;
 overflow-y:auto;
 -webkit-overflow-scrolling:touch;
 color:#e5eaf0;
 transition:background 1s,filter .4s;
}
body.day.clear{background:linear-gradient(140deg,#0f2027,#203a43,#2c5364)}
body.day.cloudy{background:linear-gradient(140deg,#232526,#414345)}
body.day.rain{background:linear-gradient(140deg,#141e30,#243b55)}
body.night{background:linear-gradient(180deg,#000,#0b0c10)}

.app{
 width:100%;
 max-width:420px;
 padding:16px;
 margin:20px 0;
 backdrop-filter:blur(26px);
 background:rgba(10,15,20,.65);
 border-radius:30px;
 box-shadow:0 30px 60px rgba(0,0,0,.8);
}

.card{
 margin-bottom:14px;
 padding:16px;
 border-radius:22px;
 background:rgba(20,25,30,.55);
}
.center{text-align:center}
.temp{font-size:48px;font-weight:bold;color:#fff}
.icon{font-size:64px}

.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:12px
}
.box{
 padding:12px;
 border-radius:14px;
 background:rgba(0,0,0,.3);
 text-align:center;
 font-size:13px
}

canvas{width:100%;height:150px}

input,button{
 width:100%;
 padding:12px;
 border-radius:14px;
 border:none;
 font-size:16px
}
input{background:rgba(255,255,255,.1);color:#fff}
button{background:#1f6feb;color:#fff;margin-top:6px}

footer{text-align:center;font-size:12px;opacity:.7}
</style>
</head>

<body class="day clear">

<div class="app">

<div class="card center"><h2>Climix</h2></div>

<div class="card">
<input id="city" placeholder="Enter city">
<button onclick="search()">Search</button>
</div>

<div class="card center">
<div class="icon" id="icon">‚õÖ</div>
<div class="temp" id="temp">--¬∞C</div>
<div id="desc"></div>
<div id="place"></div>
</div>

<!-- LOCATION CONDITIONS -->
<div class="card">
<h4>üìç Location Conditions</h4>
<div class="grid" id="locationBox"></div>
</div>

<!-- AQI CONDITIONS -->
<div class="card">
<h4>üå´Ô∏è Air Quality (AQI)</h4>
<div class="grid" id="aqiBox"></div>
</div>

<div class="card">
<h4>Hourly Temperature</h4>
<canvas id="tChart"></canvas>
</div>

<div class="card">
<h4>AQI Trend</h4>
<canvas id="aqiChart"></canvas>
</div>

<footer>¬© Manik Roy 2025. All Rights Reserved.</footer>
</div>

<script>
window.onload=()=>loadWeather(28.6139,77.2090,"Delhi");

function search(){
 if(!city.value) return;
 fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city.value}`)
 .then(r=>r.json())
 .then(d=>{
  if(!d.results) return;
  const x=d.results[0];
  loadWeather(x.latitude,x.longitude,x.name);
 });
}

function loadWeather(lat,lon,name){
 fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=temperature_2m,relative_humidity_2m,pressure_msl,apparent_temperature,winddirection_10m&timezone=auto`)
 .then(r=>r.json())
 .then(d=>{
  temp.innerText=d.current_weather.temperature+"¬∞C";
  icon.innerText="‚õÖ";
  desc.innerText="Live Conditions";
  place.innerText=name;

  renderLocation(d,lat,lon);
  draw(d.hourly.temperature_2m,tChart);
  loadAQI(lat,lon);
 });
}

function renderLocation(d,lat,lon){
 locationBox.innerHTML=`
 <div class="box">Latitude<br><b>${lat.toFixed(2)}</b></div>
 <div class="box">Longitude<br><b>${lon.toFixed(2)}</b></div>
 <div class="box">Elevation<br><b>${d.elevation} m</b></div>
 <div class="box">Timezone<br><b>${d.timezone}</b></div>
 <div class="box">Feels Like<br><b>${d.hourly.apparent_temperature[0]}¬∞C</b></div>
 <div class="box">Humidity<br><b>${d.hourly.relative_humidity_2m[0]}%</b></div>
 <div class="box">Pressure<br><b>${d.hourly.pressure_msl[0]} hPa</b></div>
 <div class="box">Wind Dir<br><b>${d.hourly.winddirection_10m[0]}¬∞</b></div>
 <div class="box">Temperature<br><b>${d.current_weather.temperature}¬∞C</b></div>
 <div class="box">Wind Speed<br><b>${d.current_weather.windspeed} km/h</b></div>
 `;
}

function loadAQI(lat,lon){
 fetch(`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&hourly=us_aqi,pm2_5,pm10,carbon_monoxide,nitrogen_dioxide,sulphur_dioxide,ozone`)
 .then(r=>r.json())
 .then(a=>{
  const v=a.hourly.us_aqi[0];
  aqiBox.innerHTML=`
   <div class="box">AQI<br><b>${v}</b></div>
   <div class="box">Category<br><b>${aqiCat(v)}</b></div>
   <div class="box">PM2.5<br><b>${a.hourly.pm2_5[0]}</b></div>
   <div class="box">PM10<br><b>${a.hourly.pm10[0]}</b></div>
   <div class="box">CO<br><b>${a.hourly.carbon_monoxide[0]}</b></div>
   <div class="box">NO‚ÇÇ<br><b>${a.hourly.nitrogen_dioxide[0]}</b></div>
   <div class="box">SO‚ÇÇ<br><b>${a.hourly.sulphur_dioxide[0]}</b></div>
   <div class="box">O‚ÇÉ<br><b>${a.hourly.ozone[0]}</b></div>
   <div class="box">Health<br><b>${aqiAdvice(v)}</b></div>
   <div class="box">Risk<br><b>${aqiRisk(v)}</b></div>
  `;
  draw(a.hourly.us_aqi,aqiChart);
 });
}

function draw(data,c){
 const x=c.getContext("2d");
 c.width=320;c.height=150;
 x.clearRect(0,0,320,150);
 const m=Math.min(...data),M=Math.max(...data);
 x.beginPath();
 data.slice(0,24).forEach((v,i)=>{
  const X=i*(320/23);
  const Y=150-((v-m)/(M-m||1))*150;
  i?x.lineTo(X,Y):x.moveTo(X,Y);
 });
 x.strokeStyle="#1f6feb";
 x.lineWidth=2;
 x.stroke();
}

function aqiCat(v){
 if(v<=50) return "Good";
 if(v<=100) return "Moderate";
 if(v<=150) return "Unhealthy (S)";
 if(v<=200) return "Unhealthy";
 return "Hazardous";
}
function aqiAdvice(v){
 if(v<=50) return "Safe";
 if(v<=100) return "Sensitive avoid long exposure";
 if(v<=150) return "Wear mask";
 return "Stay indoors";
}
function aqiRisk(v){
 if(v<=50) return "Low";
 if(v<=100) return "Medium";
 if(v<=150) return "High";
 return "Severe";
}
</script>
</body>
</html>
